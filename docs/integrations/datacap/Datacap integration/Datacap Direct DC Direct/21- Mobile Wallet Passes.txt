Mobile Wallet PassesOverviewMobile Wallets are applications which store credit cards, debit cards, bank information and even rewards cards and event tickets in a secure digital format. They can be used with NFC compatible terminals as an acceptable form of payment as well as to redeem Value Added Services (VAS).To accept Value Added Services, a public certificate will need to be acquired and loaded to the device. After the new configuration is loaded, use the transaction types detailed below.Apple VASGetVASDataTo accept Apple and Google Value Added Services, such as tickets and passes from an Apple Wallet and Google SmartTapImplementation Notes:1. Currently available on PAX pads onlyRequest? xml?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.232:8080Content-Type: application/xmlContent-Length: 94<?xml version="1.0"?><TStream>    <Transaction>        <MerchantID>DEMODCHALGP</MerchantID>        <POSPackageID>POSTest:2.0</POSPackageID>        <TranCode>GetVASData</TranCode>        <SecureDevice>CloudEMV2</SecureDevice>        <SequenceNo>0010010010</SequenceNo>        <TranDeviceID>2620031556</TranDeviceID>        <VASResponse>Allow</VASResponse>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)SecureDevice(String 1-40 chars)For Server communication use value “CloudEMV2”SequenceNo(String 1-20 chars)RequiredUse the value returned for SequenceNo from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.TranDeviceID(String 10-24 chars)ConditionalThe serial number on the device (for Ingenico TETRA pads it is 24 digits). TranDeviceID must be given either in the request body or as an HTTP header. TranDeviceID is required for Server communication.VASResponse(String 1-20 chars)Use “Allow” to get VAS Data in the transaction response.Response? xml?<?xml version="1.0" encoding="UTF-8"?><RStream>    <CmdResponse>        <ResponseOrigin>Client</ResponseOrigin>        <DSIXReturnCode>000000</DSIXReturnCode>        <CmdStatus>Success</CmdStatus>        <TextResponse>Success</TextResponse>        <SequenceNo>0010010010</SequenceNo>    </CmdResponse>    <TranResponse>        <TranCode>GetVASData</TranCode>    </TranResponse>    <TranCode>GetVASData</TranCode>    <VASResult>Success</VASResult>    <VASCardType>AppleVAS</VASCardType>    <VASId>pass.com.apple.wallet.vas.prodtest</VASId>    <VASData>7MMHLND4K8OBJXFRV4W3YOOH8GX0I3</VASData></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“TranCloud” = generated by tran cloud service“Client” = generated by Tran application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Section 12 on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, See Section 12 on Error Codes for values.SequenceNo(Number 1-20 chars)RequiredThe sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.UserTrace(String 0-40 chars)Echo of data supplied by the user system in the request; for use by the user system for internal tracking. May be null if no user system data was supplied in the requestTranCode(String 1-40 chars)RequiredTranCode value supplied in the transaction request.VASResult(String 1-10 chars)When the CmdStatus is “Success”, VASResult is always “Success”. If CmdStatus is “Error”, then the VAS fields will not be returned.VASCardType(String 1-20 chars)VAS Card type used on transaction. Current supported values include: AppleVAS.VASId(String 1-50 chars)ID for VAS transaction.VASData(String 1-255 chars)VAS Data resulting from a successful transaction.Google VASGetSmartTapPublicKeyCertificateTo request a Google Smart Tap Public Key CertificateImplementation Notes:1. Currently available on PAX pads only.2. Used to request a Public Key Certificate to encrypt a POS-generated AES key - refer our implementation notes for Google SmartTap Response Implementation NotesSample Request? xml?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.232:8080Content-Type: application/xmlContent-Length: 84<?xml version="1.0"?><TStream>    <Transaction>        <MerchantID>DEMODCHALGP</MerchantID>                <POSPackageID>POSTest:2.0</POSPackageID>        <TranCode>GetSmartTapPublicKeyCertificate</TranCode>        <SequenceNo>0010010010</SequenceNo>        <SecureDevice>CloudEMV2</SecureDevice>        <TranDeviceID>2620031556</TranDeviceID>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”).TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)SequenceNo(String 10-12 chars)RequiredUse the value returned for <SequenceNo> from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.SecureDevice(String 1-40 chars)For Server communication use value “CloudEMV2”TranDeviceID(String 10-24 chars)ConditionalThe serial number on the device (for Ingenico TETRA pads it is 24 digits). TranDeviceID must be given either in the request body or as an HTTP header. TranDeviceID is required for Server communication.Response? xml?<RStream>    <CmdResponse>        <ResponseOrigin>Client</ResponseOrigin>        <DSIXReturnCode>000000</DSIXReturnCode>        <CmdStatus>Success</CmdStatus>        <TextResponse>Success</TextResponse>        <SequenceNo>0010010010</SequenceNo>        <UserTrace>TEST</UserTrace>    </CmdResponse>    <TranCode>GetSmartTapPublicKeyCertificate</TranCode>    <PublicKeyCertificate>-----BEGIN CERTIFICATE-----7MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I37MMHLND4K8OBJXFRV4W3YOOH8GX0I3-----END CERTIFICATE-----</PublicKeyCertificate></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“TranCloud” = generated by tran cloud service“Client” = generated by Tran application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Section 12 on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, See Section 12 on Error Codes for values.SequenceNo(Number 1-20 chars)RequiredThe sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.PublicKeyCertificate(String 1-2048 chars)The value that is returned to use to encrypt the AES key that the point of sale provides.SetSmartTapLongTermPrivateKeyTo set and push a “Long Term Private Key” to the pad for acceptance of Google Smart Tap.Implementation Notes:1. Currently available on PAX pads only.2. The “LongTermPrivateKey” is also known as the “Google Redemption Issuer ID”.3. The merchant or merchant organization needs to be set up with Google as an Redemption Issuer to receive a “Google Redemption Issuer ID”“.Sample Request? xml?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.232:8080Content-Type: application/xmlContent-Length: 104<?xml version="1.0"?><TStream>    <Transaction>        <MerchantID>DEMODCHALGP</MerchantID>        <POSPackageID>POSTest:2.0</POSPackageID>        <TranCode>SetSmartTapLongTermPrivateKey</TranCode>        <SecureDevice>CloudEMV2</SecureDevice>        <SequenceNo>0010010010</SequenceNo>        <MerchantLongTermKeyVersion>00000001</MerchantLongTermKeyVersion>        <LongTermPrivateKeyEncryptedWithAES>FDJKSALFJDKSLAFJDSA908213403FDJKSLAFDSFDSKAFDJSKALF134819431JFDSKLAFJDKS</LongTermPrivateKeyEncryptedWithAES>        <AesKeyEncryptedWithPubCert>FDJKSALFJDKSLAFJDSA908213403FDJKSLAFDSFDSKAFDJSKALF134819431JFDSKLAFJDKS</AesKeyEncryptedWithPubCert>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”).TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)SecureDevice(String 1-40 chars)For Server communication use value "CloudEMV2”SequenceNo(String 10-12 chars)RequiredUse the value returned for <SequenceNo> from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.LongTermPrivateKeyEncryptedWithAES(String 1-1024 chars)RequiredThis is the Long Term Private Key provided by Google to the “redemption issuer” encrypted by a POS-provided AES keyAesKeyEncryptedWithPubCert(String 1-1024 chars)RequiredThis is the POS-provided AES key that is encrypted using the PublicKeyCertificate that is returned when you run the GetSmartTapPublicKeyCertificateResponse? xml?<RStream>    <CmdResponse>        <ResponseOrigin>Client</ResponseOrigin>        <DSIXReturnCode>000000</DSIXReturnCode>        <TranCode>SetSmartTapLongTermPrivateKey</TranCode>        <CmdStatus>Success</CmdStatus>        <TextResponse>Success</TextResponse>        <SequenceNo>0010010010</SequenceNo>    </CmdResponse></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“TranCloud” = generated by tran cloud service“Client” = generated by Tran application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Section 12 on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, See Section 12 on Error Codes for values.SequenceNo(Number 1-20 chars)RequiredThe sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.GetVASDataTo accept Apple and Google Value Added Services, such as tickets and passes from an Apple Wallet and Google SmartTapImplementation Notes:1. Currently available on PAX pads onlyRequest? xml?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.232:8080Content-Type: application/xmlContent-Length: 105<?xml version="1.0"?><TStream>    <Transaction>        <MerchantID>DEMODCHALGP</MerchantID>        <POSPackageID>POSTest:2.0</POSPackageID>        <TranCode>GetVASData</TranCode>        <SecureDevice>CloudEMV2</SecureDevice>        <RefNo>2215782092</RefNo>        <InvoiceNo>2215782092</InvoiceNo>        <SequenceNo>0010010010</SequenceNo>        <VASResponse>Allow</VASResponse>     </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return, void, etc)SecureDevice(String 1-40 chars)For Server communication use value “CloudEMV2”RefNo(String 1-50 chars)RequiredUse the RefNo value returned in the original transaction responseInvoiceNo(Number 1-8 chars)RequiredInvoice number – sequential receipt number, check number, or other unique transaction identifier.SequenceNo(String 1-20 chars)For reversal support with selected processors: Use ‘00000000’ for first transaction in new installations.For all subsequent transactions: use the SequenceNo value returned in the previous transaction response. See Processing Transactions for details.OperatorID(String 1-24 chars)Operator (clerk, server, etc.) associated with the transaction.VASResponse(String 1-20 chars)Use “Allow” to get VAS Data in the transaction response.Response? xml?<?xml version="1.0" encoding="UTF-8"?><RStream>    <CmdResponse>        <ResponseOrigin>Client</ResponseOrigin>        <DSIXReturnCode>000000</DSIXReturnCode>        <CmdStatus>Success</CmdStatus>        <TextResponse>Success</TextResponse>        <SequenceNo>0010010010</SequenceNo>        <UserTrace></UserTrace>    </CmdResponse>    <TranCode>GetVASData</TranCode>    <VASResult>Success</VASResult>    <VASCardType>GoogleSmartTap</VASCardType>    <VASId>N/A</VASId>    <VASToken>N/A</VASToken>    <VASData>BA4E591E06475D6193A9F76B8B009AC63813E05603D7BD126DFF68A35EA8AA00E3855A137D3D455F025E80FCC62124CE7783EC21E8B85E7142F944136EDB9702F2F390CF4600646CC2D649C1FAF83AC0BD5A5803B4E9DBFB6054F380644FC7A72A630662B357FAA5ACD18B7BFF14B4AB3BFE1BE73B7EE0206704F86706BE720DDFF37DE5CA157EE9659FD36DF56A4B39CBDCF331CFC62EB659AA6FD656224CB0C964390FA6544DCE30D886C4A25724F917669C49708A2F5D792473D19956DFD9A93064B278BB3542FFBAA1B8372E34AF</VASData></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“TranCloud” = generated by tran cloud service“Client” = generated by Tran application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Section 12 on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, See Section 12 on Error Codes for values.SequenceNo(Number 1-20 chars)RequiredThe sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.TranCode(String 1-40 chars)RequiredTranCode value supplied in the transaction request.VASResult(String 1-10 chars)When the CmdStatus is “Success”, VASResult is always “Success”. If CmdStatus is “Error”, then the VAS fields will not be returned.VASCardType(String 1-20 chars)VAS Card type used on transaction. Current supported values include: AppleVAS.VASId(String 1-50 chars)ID for VAS transaction.VASData(String 1-255 chars)VAS Data resulting from a successful transaction.