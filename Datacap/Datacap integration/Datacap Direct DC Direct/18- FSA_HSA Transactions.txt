FSA/HSA TransactionsFSA With LookupDC Direct supports <FSAWithLookup> amount for EMVSale transactions, which allows FSA/HSA chip cards to be processed successfully. This feature is supported via the NETePay Hosted platform and only to certain backend processors. For an EMVSale transaction, the integrator can pass in the dollar amount of FSA eligible items in a tag <FSAWithLookup>. NETePay Hosted will use a BIN lookup to determine if the card presented is an FSA or HSA card. If it is, the TranCode will be changed from EMVSale to EMVFSASale and the <FSAWithLookup> amount will replace the <Purchase> amount. All other amounts will be removed. If the card is not an FSA or HSA card, then the transaction will be sent for processing unchanged. The integrator is required to provide one of the four FSA elements with the associated amount. To verify if the transaction was processed as EMV FSA, the integrator should inspect the TranCode and the amount authorized in the response. This will allow the POS to determine whether the transaction was processed as FSA/HSA or as regular Credit.FSA/HSA EMVSaleTo process a payment on a Flexible Spending Account or Health Savings Account credit card.Implementation Notes:1. <TranCode> should be set to EMVSale2. For EMV FSA, include <FSAWithLookup> with the total amount of the FSA eligible items and at least one of the FSA elements must be included with an amount: <FSAPrescription>, <FSAClinical>, <FSADental> or <FSAVision>.3. The <Purchase> amount can exceed the FSA amount if also including non-FSA eligible items when processing EMV FSA transactions.4. For the <Amount:Purchase> tag, Healthcare items must have been validated against the IIAS database. If the Authorize Amount is included it must be the same as the Purchase Amount. The entire Purchase Amount must be Healthcare account eligible.5. Support for Partial Authorization is required when processing FSA transactions.Sample Request? Required? Optional?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.151:8080Content-Type: application/xmlContent-Length: 514<?xml version="1.0"?>  <TStream>    <Transaction>        <MerchantID>DEMODCHAL2GP</MerchantID>        <POSPackageID>LPOS:2.95</POSPackageID>        <TranCode>EMVSale</TranCode>        <InvoiceNo>101125</InvoiceNo>        <RefNo>101125</RefNo>        <Amount>            <Purchase>12.00</Purchase>            <FSAWithLookup>12.00</FSAWithLookup>            <FSAPrescription>12.00</FSAPrescription>        </Amount>        <SequenceNo>0010010010</SequenceNo>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)InvoiceNo(Number 1-8 chars)RequiredInvoice number - sequential receipt number, check number, or other unique transaction identifier created and supplied by POS system.RefNo(String 1-50 chars)RequiredTransaction reference number. Use the same data as InvoiceNo.Amount:Purchase(Number 1-8 chars)RequiredTotal amount of eligible and non-eligible FSA items. If only FSA eligible items are included in request, then total amount is the same as FSAWithLookup amount.FSAWithLookup(Number 1-8 chars)RequiredTotal amount of all FSA eligible items.Amount:FSAPrescription(Number 1-8 chars)ConditionalAmount of FSA qualifiying prescription items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSAVision(Number 1-8 chars)ConditionalAmount of FSA qualifiying vision/optical items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSAClinical(Number 1-8 chars)ConditionalAmount of FSA qualifiying clinical items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSADental(Number 1-8 chars)ConditionalAmount of FSA qualifiying dental items formatted to two decimal places. At least one of the four FSA elements must be included in request.SequenceNo(String 1-20 chars)RequiredUse the value returned for SequenceNo from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.OKAmount(String 1-24 chars)When the optional OKAmount tag is included with the value “Disallow”, the DC Direct device will not prompt the cardholder to approve the transaction amount. If the OKAmount tag is omitted, the PIN pad will ask the cardholder to approve the transaction amount by default.SecureDevice(String 1-40 chars)“CloudEMV2”LaneID(Number 1-8 chars)A unique LaneID (lane number) can be supplied to identify each POS/ECR in a single store location with multiple payment pointsOperatorID(String 1-24 chars)Operator (clerk, server, etc.) associated with the transaction.UserTrace(String 1-24 chars)A unique value created and supplied by POS systemDuplicate(String 1-24 chars)“None” OR “Override” to force approval of a transaction that was previously rejected as a duplicate by the processor.TranDeviceID(String 10-24 chars)ConditionalThe serial number of the DC Direct device. Required for DC Direct Server communication.Sample Response? Required? Optional?<?xml version="1.0" encoding="UTF-8"?><RStream>    <AcctNo>************6781</AcctNo>    <AcqRefData>aNb007114503626452d e000lA </AcqRefData>    <AuthCode>30928A</AuthCode>    <Authorize>10.00</Authorize>    <CaptureStatus>Captured</CaptureStatus>    <CardType>VISA</CardType>    <CmdStatus>Approved</CmdStatus>    <DSIXReturnCode>000000</DSIXReturnCode>    <InvoiceNo>0003</InvoiceNo>    <MerchantID>DEMODCHALGP</MerchantID>    <PayAPI_Id>q-25316D09744F4055A353C76B84A72E89</PayAPI_Id>    <OperatorID>TEST</OperatorID>    <ProcessData>|00|510100201000</ProcessData>    <Purchase>10.00</Purchase>    <RefNo>1001</RefNo>    <ResponseOrigin>Processor</ResponseOrigin>    <DSIXReturnCode>000000</DSIXReturnCode>    <CmdStatus>Approved</CmdStatus>    <TextResponse>APPROVED</TextResponse>    <SequenceNo>0010010010</SequenceNo>    <MerchantID>DEMODCHAL2GP</MerchantID>    <AcctNo>511509******7899</AcctNo>    <CardType>M/C</CardType>    <TranCode>EMVFSASale</TranCode>    <AuthCode>wR4b0VR</AuthCode>    <CaptureStatus>Captured</CaptureStatus>    <RefNo>ogXIfUTwvJLoLT6n3M7</RefNo>    <InvoiceNo>101125</InvoiceNo>    <Purchase>12.00</Purchase>    <Authorize>12.00</Authorize>    <AcqRefData>1200||H39savhog|EMVFSASale</AcqRefData>    <ProcessData>gqQVhGIVe9CQbnOEfs2MgEr5kbwcNwmUrEnDkaGRCEehrihwoh3DsvfbGAoceU1VAV3crLQ</ProcessData>    <RecordNo>DC4:AQFOWhJGjHZd_a3FmAdmCKI_NmnrdUn6TF2BEyACmx6VrXOpYgtZD2TUfvk8zNHM045mp_NNo8cpUvnYYojK-6YEdrobitPYFqckFOR2pK7200ZN008W8k5KXhOXszT5rFSTgYCeH4L9Chq8gLAECHkm</RecordNo>    <EntryMethod>SWIPED</EntryMethod>    <Date>11/10/2025</Date>    <Time>15:09:22</Time>    <PayAPI_Id>q-35IlFL7KC7YpeqvELdINFbSJ9lj</PayAPI_Id>    <Line1>. </Line1>    <Line2>.                  SALE                  </Line2>    <Line3>. </Line3>    <Line4>.MASTERCARD              ************7899</Line4>    <Line5>.ENTRY METHOD: SWIPED                    </Line5>    <Line6>.DATE: 11/10/2025  TIME: 15:09:22        </Line6>    <Line7>. </Line7>    <Line8>.INVOICE: 101125                         </Line8>    <Line9>.REFERENCE: ogXIfUTwvJLoLT6n3M7          </Line9>    <Line10>.AUTH CODE: wR4b0VR                      </Line10>    <Line11>. </Line11>    <Line12>.AMOUNT                        USD$ 12.00</Line12>    <Line13>.                              ==========</Line13>    <Line14>.TOTAL                         USD$ 12.00</Line14>    <Line15>. </Line15>    <Line16>.          APPROVED - THANK YOU          </Line16>    <Line17>.I AGREE TO PAY THE ABOVE TOTAL AMOUNT   </Line17>    <Line18>.ACCORDING TO CARD ISSUER AGREEMENT.     </Line18>    <Line19>.(MERCHANT AGREEMENT IF CREDIT VOUCHER)  </Line19>    <Line20>. </Line20>    <Line21>. </Line21>    <Line22>. </Line22>    <Line23>.x_______________________________________</Line23>    <Line24>.Cardholder Signature                    </Line24>    <Line25>. </Line25>    <UserTrace /></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“Client” = generated by DC Direct application“DCDirect” = generated by DC Direct application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Errors on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, see Errors on Error Codes for values.SequenceNo(Number 1-20 chars)The sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.UserTrace(String 0-40 chars)Echo of data supplied by the user system in the request; for use by the user system for internal tracking. May be null if no user system data was supplied in the requestMerchantID(String 1-24 chars)The merchant ID supplied in the transaction request.AcctNo(String 1-24 chars)The account number from the card used for a manually entered transaction – will be truncated.CardType(String 3-24 chars)Card type used on transaction. Values include: AMEX, VISA, M/C, DCLB, DCVR, JCB, Debit, OTHER, UNDETERMINED (returned on tokenized transactions).TranCode(String 1-40 chars)TranCode value in response will indicate if transaction was processed as FSA.AuthCode(String 1-24 chars)The authorization code returned by the processor for the approved transaction. The AuthCode value should be saved since it is required for VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.CaptureStatus(String 1-24 chars)Indicates whether the host has captured the transaction. eg. “Captured”, “NotCaptured”RefNo(String 1-50 chars)A reference returned by the processor. Should initially match InvoiceNo. The RefNo value returned by the processor should be saved since it is required for subsequent VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.InvoiceNo(Number 1-8 chars)The invoice number supplied in the transaction request.OperatorID(Number 1-10 chars)Operator (clerk, server, etc.) associated with the Transaction.Purchase(Number 1-8 chars)The purchase amount requested in the transaction (to 2 decimal places).Authorize(Number 1-8 chars)The amount actually authorized for the transaction. This amount could be less than the Purchase amount requested and the POS/ECR system should verify to determine if additional tendering is required to satisfy the total payment.AcqRefData(String 1-200 chars)Acquirer Reference Data returned by processor.ProcessData(String 1-999 chars)optionally returned by processor. This value must be retained for use in a subsequent requests.EntryMethod(String 1-40 chars)RequiredTransaction entry method.RecordNo(String 1-256 chars)Returned when optional<RecordNo> tag used in a request.The RecordNo value can be saved and used as a token to process subsequent ByRecordNo transactions without using account number data.Date(String 1-40 chars)Transaction dateTime(String 1-40 chars)Transaction timePayAPI_Id(String 1-34 chars)The Pay API reference number to be used through Pay API for follow up transactions.PrintData:LineNNN(String 1-41 chars)Receipt print lines. Each <LineN> tag should be printed on a new line. Each <LineN> tag begins with a “.” which should not be printed – empty lines (blank) have only “.” as data. When <PrintData> elements exist, they should always be printed as the draft for the transaction.FSA/HSA EMVVoidSaleTo void a previously completed Flexible Spending Account or Health Savings Account transaction.Implementation Notes:1. <TranCode> should be set to EMVVoidSale2. Include the RefNo, AuthCode, AcqRefData and optional ProcessData values returned in FSA EMVSale response to be voided.3. FSA/HSA voids are processed as EMVVoidSale and will not include any FSA elements from the initial FSA EMVSale request.Sample Request? Required? Optional?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.151:8080Content-Type: application/xmlContent-Length: 675<?xml version="1.0"?>  <TStream>    <Transaction>        <MerchantID>DEMODCHAL2GP</MerchantID>        <POSPackageID>LPOS:2.95</POSPackageID>        <TranCode>EMVVoidSale</TranCode>         <InvoiceNo>101125</InvoiceNo>         <RefNo>ogXIfUTwvJLoLT6n3M7</RefNo>         <AuthCode>wR4b0VR</AuthCode>        <Amount>            <Purchase>12.00</Purchase>        </Amount>        <SequenceNo>0010010010</SequenceNo>        <AcqRefData>1200||H39savhog|EMVFSASale</AcqRefData>    <ProcessData>gqQVhGIVe9CQbnOEfs2MgEr5kbwcNwmUrEnDkaGRCEehrihwoh3DsvfbGAoceU1VAV3crLQ</ProcessData>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranType(String 1-40 chars)RequiredUsed with the TranCode to specify payment type.TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)InvoiceNo(Number 1-8 chars)RequiredInvoice number - sequential receipt number, check number, or other unique transaction identifier created and supplied by POS system.RefNo(String 1-50 chars)RequiredTransaction reference number. Use the same data as InvoiceNo.Amount:Purchase(Number 1-8 chars)RequiredPurchase price (with 2 place decimal – e.g. 29.95)AuthCode(String 1-16 chars)RequiredWhen performing a followup transaction, use the AuthCode returned in the original transaction response.AcqRefData(String 1-200 chars)RequiredUse the AcqRefData value returned in the original Sale transaction response.ProcessData(String 1-999 chars)Conditionaloptionally included if returned by processor in sale response.SequenceNo(String 1-20 chars)RequiredUse the value returned for SequenceNo from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.OKAmount(String 1-24 chars)When the optional OKAmount tag is included with the value “Disallow”, the DC Direct device will not prompt the cardholder to approve the transaction amount. If the OKAmount tag is omitted, the PIN pad will ask the cardholder to approve the transaction amount by default.SecureDevice(String 1-40 chars)“CloudEMV2”OperatorID(String 1-24 chars)Operator (clerk, server, etc.) associated with the transaction.UserTrace(String 1-24 chars)A unique value created and supplied by POS systemTranDeviceID(String 10-24 chars)ConditionalThe serial number of the DC Direct device. Required for DC Direct Server communication.Sample Response? Required? Optional?<?xml version="1.0" encoding="UTF-8"?><RStream>    <ResponseOrigin>Processor</ResponseOrigin>    <DSIXReturnCode>000000</DSIXReturnCode>    <CmdStatus>Approved</CmdStatus>    <TextResponse>APPROVED</TextResponse>    <SequenceNo>0010010010</SequenceNo>    <MerchantID>DEMODCHAL2GP</MerchantID>    <AcctNo>511509******7899</AcctNo>    <CardType>M/C</CardType>    <TranCode>EMVVoidSale</TranCode>    <AuthCode>ROqyhbMrH4</AuthCode>    <CaptureStatus>Captured</CaptureStatus>    <RefNo>b2I0YTf7uK8o1J3REXr31CB7</RefNo>    <InvoiceNo>101125</InvoiceNo>    <Purchase>12.00</Purchase>    <Authorize>12.00</Authorize>    <AcqRefData>1200||Q5TaLARPTIu9YNXwDl|EMVVoidSale</AcqRefData>    <ProcessData>ar6d8hHX2eS3GD80KcEiiljL4amXlJZyc1QcUIx6azDRGjOt1z429277hGm9tVF5CZnwsLfAijaLYBavNBQiwBDRF6ZYVfRUBeoeTIxXrTKbjkt3tzX0vvQ0n5TcHNneiqtNMxa3adV7XSDCZ6xzDdkrL</ProcessData>    <RecordNo>DC4:AQE6GC8kvVIyD6mrvR78b6mk8RIo_cVUft8gO0ktz6Ui08C9Jbhzf9k1poqceTgGnzy237-7YNjLeMkUT341UzHr8-VC6dMOm2jxa_ATeGei-1HqxFkuCLcA831R7GEa5S5P4s80b-U_MaUUks_Z9hKY</RecordNo>    <EntryMethod>SWIPED</EntryMethod>    <Date>11/10/2025</Date>    <Time>16:49:19</Time>    <PayAPI_Id>q-35IxP7VqYfInZ31fmCGejPct1py</PayAPI_Id>    <Line1>. </Line1>    <Line2>.                VOID SALE               </Line2>    <Line3>. </Line3>    <Line4>.MASTERCARD              ************7899</Line4>    <Line5>.ENTRY METHOD: SWIPED                    </Line5>    <Line6>.DATE: 11/10/2025  TIME: 16:49:19        </Line6>    <Line7>. </Line7>    <Line8>.INVOICE: 101125                         </Line8>    <Line9>.REFERENCE: b2I0YTf7uK8o1J3REXr31CB7     </Line9>    <Line10>.AUTH CODE: ROqyhbMrH4                   </Line10>    <Line11>. </Line11>    <Line12>.AMOUNT                        USD$ 12.00</Line12>    <Line13>.                              ==========</Line13>    <Line14>.TOTAL                         USD$ 12.00</Line14>    <Line15>. </Line15>    <Line16>.          APPROVED - THANK YOU          </Line16>    <Line17>.I AGREE TO PAY THE ABOVE TOTAL AMOUNT   </Line17>    <Line18>.ACCORDING TO CARD ISSUER AGREEMENT.     </Line18>    <Line19>.(MERCHANT AGREEMENT IF CREDIT VOUCHER)  </Line19>    <Line20>. </Line20>    <Line21>. </Line21>    <Line22>. </Line22>    <Line23>.x_______________________________________</Line23>    <Line24>.Merchant Signature                      </Line24>    <Line25>. </Line25>    <UserTrace /></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“Client” = generated by DC Direct application“DCDirect” = generated by DC Direct application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Errors on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, see Errors on Error Codes for values.SequenceNo(Number 1-20 chars)The sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.UserTrace(String 0-40 chars)Echo of data supplied by the user system in the request; for use by the user system for internal tracking. May be null if no user system data was supplied in the requestMerchantID(String 1-24 chars)The merchant ID supplied in the transaction request.AcctNo(String 1-24 chars)The account number from the card used for a manually entered transaction – will be truncated.CardType(String 3-24 chars)Card type used on transaction. Values include: AMEX, VISA, M/C, DCLB, DCVR, JCB, Debit, OTHER, UNDETERMINED (returned on tokenized transactions).TranCode(String 1-40 chars)TranCode value in response will indicate if transaction was processed as FSA.AuthCode(String 1-24 chars)The authorization code returned by the processor for the approved transaction. The AuthCode value should be saved since it is required for VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.CaptureStatus(String 1-24 chars)Indicates whether the host has captured the transaction. eg. “Captured”, “NotCaptured”RefNo(String 1-50 chars)A reference returned by the processor. Should initially match InvoiceNo. The RefNo value returned by the processor should be saved since it is required for subsequent VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.InvoiceNo(Number 1-8 chars)The invoice number supplied in the transaction request.OperatorID(Number 1-10 chars)Operator (clerk, server, etc.) associated with the Transaction.Purchase(Number 1-8 chars)The purchase amount requested in the transaction (to 2 decimal places).Authorize(Number 1-8 chars)The amount actually authorized for the transaction. This amount could be less than the Purchase amount requested and the POS/ECR system should verify to determine if additional tendering is required to satisfy the total payment.AcqRefData(String 1-200 chars)Acquirer Reference Data returned by processor.ProcessData(String 1-999 chars)optionally returned by processor. This value must be retained for use in a subsequent requests.EntryMethod(String 1-40 chars)RequiredTransaction entry method.RecordNo(String 1-256 chars)Returned when optional<RecordNo> tag used in a request.The RecordNo value can be saved and used as a token to process subsequent ByRecordNo transactions without using account number data.Date(String 1-40 chars)Transaction dateTime(String 1-40 chars)Transaction timePayAPI_Id(String 1-34 chars)The Pay API reference number to be used through Pay API for follow up transactions.PrintData:LineNNN(String 1-41 chars)Receipt print lines. Each <LineN> tag should be printed on a new line. Each <LineN> tag begins with a “.” which should not be printed – empty lines (blank) have only “.” as data. When <PrintData> elements exist, they should always be printed as the draft for the transaction.FSA/HSA TransactionsFSA With LookupDC Direct supports <FSAWithLookup> amount for EMVSale transactions, which allows FSA/HSA chip cards to be processed successfully. This feature is supported via the NETePay Hosted platform and only to certain backend processors. For an EMVSale transaction, the integrator can pass in the dollar amount of FSA eligible items in a tag <FSAWithLookup>. NETePay Hosted will use a BIN lookup to determine if the card presented is an FSA or HSA card. If it is, the TranCode will be changed from EMVSale to EMVFSASale and the <FSAWithLookup> amount will replace the <Purchase> amount. All other amounts will be removed. If the card is not an FSA or HSA card, then the transaction will be sent for processing unchanged. The integrator is required to provide one of the four FSA elements with the associated amount. To verify if the transaction was processed as EMV FSA, the integrator should inspect the TranCode and the amount authorized in the response. This will allow the POS to determine whether the transaction was processed as FSA/HSA or as regular Credit.FSA/HSA EMVSaleTo process a payment on a Flexible Spending Account or Health Savings Account credit card.Implementation Notes:1. <TranCode> should be set to EMVSale2. For EMV FSA, include <FSAWithLookup> with the total amount of the FSA eligible items and at least one of the FSA elements must be included with an amount: <FSAPrescription>, <FSAClinical>, <FSADental> or <FSAVision>.3. The <Purchase> amount can exceed the FSA amount if also including non-FSA eligible items when processing EMV FSA transactions.4. For the <Amount:Purchase> tag, Healthcare items must have been validated against the IIAS database. If the Authorize Amount is included it must be the same as the Purchase Amount. The entire Purchase Amount must be Healthcare account eligible.5. Support for Partial Authorization is required when processing FSA transactions.Sample Request? Required? Optional?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.151:8080Content-Type: application/xmlContent-Length: 514<?xml version="1.0"?>  <TStream>    <Transaction>        <MerchantID>DEMODCHAL2GP</MerchantID>        <POSPackageID>LPOS:2.95</POSPackageID>        <TranCode>EMVSale</TranCode>        <InvoiceNo>101125</InvoiceNo>        <RefNo>101125</RefNo>        <Amount>            <Purchase>12.00</Purchase>            <FSAWithLookup>12.00</FSAWithLookup>            <FSAPrescription>12.00</FSAPrescription>        </Amount>        <SequenceNo>0010010010</SequenceNo>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)InvoiceNo(Number 1-8 chars)RequiredInvoice number - sequential receipt number, check number, or other unique transaction identifier created and supplied by POS system.RefNo(String 1-50 chars)RequiredTransaction reference number. Use the same data as InvoiceNo.Amount:Purchase(Number 1-8 chars)RequiredTotal amount of eligible and non-eligible FSA items. If only FSA eligible items are included in request, then total amount is the same as FSAWithLookup amount.FSAWithLookup(Number 1-8 chars)RequiredTotal amount of all FSA eligible items.Amount:FSAPrescription(Number 1-8 chars)ConditionalAmount of FSA qualifiying prescription items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSAVision(Number 1-8 chars)ConditionalAmount of FSA qualifiying vision/optical items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSAClinical(Number 1-8 chars)ConditionalAmount of FSA qualifiying clinical items formatted to two decimal places. At least one of the four FSA elements must be included in request.Amount:FSADental(Number 1-8 chars)ConditionalAmount of FSA qualifiying dental items formatted to two decimal places. At least one of the four FSA elements must be included in request.SequenceNo(String 1-20 chars)RequiredUse the value returned for SequenceNo from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.OKAmount(String 1-24 chars)When the optional OKAmount tag is included with the value “Disallow”, the DC Direct device will not prompt the cardholder to approve the transaction amount. If the OKAmount tag is omitted, the PIN pad will ask the cardholder to approve the transaction amount by default.SecureDevice(String 1-40 chars)“CloudEMV2”LaneID(Number 1-8 chars)A unique LaneID (lane number) can be supplied to identify each POS/ECR in a single store location with multiple payment pointsOperatorID(String 1-24 chars)Operator (clerk, server, etc.) associated with the transaction.UserTrace(String 1-24 chars)A unique value created and supplied by POS systemDuplicate(String 1-24 chars)“None” OR “Override” to force approval of a transaction that was previously rejected as a duplicate by the processor.TranDeviceID(String 10-24 chars)ConditionalThe serial number of the DC Direct device. Required for DC Direct Server communication.Sample Response? Required? Optional?<?xml version="1.0" encoding="UTF-8"?><RStream>    <AcctNo>************6781</AcctNo>    <AcqRefData>aNb007114503626452d e000lA </AcqRefData>    <AuthCode>30928A</AuthCode>    <Authorize>10.00</Authorize>    <CaptureStatus>Captured</CaptureStatus>    <CardType>VISA</CardType>    <CmdStatus>Approved</CmdStatus>    <DSIXReturnCode>000000</DSIXReturnCode>    <InvoiceNo>0003</InvoiceNo>    <MerchantID>DEMODCHALGP</MerchantID>    <PayAPI_Id>q-25316D09744F4055A353C76B84A72E89</PayAPI_Id>    <OperatorID>TEST</OperatorID>    <ProcessData>|00|510100201000</ProcessData>    <Purchase>10.00</Purchase>    <RefNo>1001</RefNo>    <ResponseOrigin>Processor</ResponseOrigin>    <DSIXReturnCode>000000</DSIXReturnCode>    <CmdStatus>Approved</CmdStatus>    <TextResponse>APPROVED</TextResponse>    <SequenceNo>0010010010</SequenceNo>    <MerchantID>DEMODCHAL2GP</MerchantID>    <AcctNo>511509******7899</AcctNo>    <CardType>M/C</CardType>    <TranCode>EMVFSASale</TranCode>    <AuthCode>wR4b0VR</AuthCode>    <CaptureStatus>Captured</CaptureStatus>    <RefNo>ogXIfUTwvJLoLT6n3M7</RefNo>    <InvoiceNo>101125</InvoiceNo>    <Purchase>12.00</Purchase>    <Authorize>12.00</Authorize>    <AcqRefData>1200||H39savhog|EMVFSASale</AcqRefData>    <ProcessData>gqQVhGIVe9CQbnOEfs2MgEr5kbwcNwmUrEnDkaGRCEehrihwoh3DsvfbGAoceU1VAV3crLQ</ProcessData>    <RecordNo>DC4:AQFOWhJGjHZd_a3FmAdmCKI_NmnrdUn6TF2BEyACmx6VrXOpYgtZD2TUfvk8zNHM045mp_NNo8cpUvnYYojK-6YEdrobitPYFqckFOR2pK7200ZN008W8k5KXhOXszT5rFSTgYCeH4L9Chq8gLAECHkm</RecordNo>    <EntryMethod>SWIPED</EntryMethod>    <Date>11/10/2025</Date>    <Time>15:09:22</Time>    <PayAPI_Id>q-35IlFL7KC7YpeqvELdINFbSJ9lj</PayAPI_Id>    <Line1>. </Line1>    <Line2>.                  SALE                  </Line2>    <Line3>. </Line3>    <Line4>.MASTERCARD              ************7899</Line4>    <Line5>.ENTRY METHOD: SWIPED                    </Line5>    <Line6>.DATE: 11/10/2025  TIME: 15:09:22        </Line6>    <Line7>. </Line7>    <Line8>.INVOICE: 101125                         </Line8>    <Line9>.REFERENCE: ogXIfUTwvJLoLT6n3M7          </Line9>    <Line10>.AUTH CODE: wR4b0VR                      </Line10>    <Line11>. </Line11>    <Line12>.AMOUNT                        USD$ 12.00</Line12>    <Line13>.                              ==========</Line13>    <Line14>.TOTAL                         USD$ 12.00</Line14>    <Line15>. </Line15>    <Line16>.          APPROVED - THANK YOU          </Line16>    <Line17>.I AGREE TO PAY THE ABOVE TOTAL AMOUNT   </Line17>    <Line18>.ACCORDING TO CARD ISSUER AGREEMENT.     </Line18>    <Line19>.(MERCHANT AGREEMENT IF CREDIT VOUCHER)  </Line19>    <Line20>. </Line20>    <Line21>. </Line21>    <Line22>. </Line22>    <Line23>.x_______________________________________</Line23>    <Line24>.Cardholder Signature                    </Line24>    <Line25>. </Line25>    <UserTrace /></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“Client” = generated by DC Direct application“DCDirect” = generated by DC Direct application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Errors on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, see Errors on Error Codes for values.SequenceNo(Number 1-20 chars)The sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.UserTrace(String 0-40 chars)Echo of data supplied by the user system in the request; for use by the user system for internal tracking. May be null if no user system data was supplied in the requestMerchantID(String 1-24 chars)The merchant ID supplied in the transaction request.AcctNo(String 1-24 chars)The account number from the card used for a manually entered transaction – will be truncated.CardType(String 3-24 chars)Card type used on transaction. Values include: AMEX, VISA, M/C, DCLB, DCVR, JCB, Debit, OTHER, UNDETERMINED (returned on tokenized transactions).TranCode(String 1-40 chars)TranCode value in response will indicate if transaction was processed as FSA.AuthCode(String 1-24 chars)The authorization code returned by the processor for the approved transaction. The AuthCode value should be saved since it is required for VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.CaptureStatus(String 1-24 chars)Indicates whether the host has captured the transaction. eg. “Captured”, “NotCaptured”RefNo(String 1-50 chars)A reference returned by the processor. Should initially match InvoiceNo. The RefNo value returned by the processor should be saved since it is required for subsequent VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.InvoiceNo(Number 1-8 chars)The invoice number supplied in the transaction request.OperatorID(Number 1-10 chars)Operator (clerk, server, etc.) associated with the Transaction.Purchase(Number 1-8 chars)The purchase amount requested in the transaction (to 2 decimal places).Authorize(Number 1-8 chars)The amount actually authorized for the transaction. This amount could be less than the Purchase amount requested and the POS/ECR system should verify to determine if additional tendering is required to satisfy the total payment.AcqRefData(String 1-200 chars)Acquirer Reference Data returned by processor.ProcessData(String 1-999 chars)optionally returned by processor. This value must be retained for use in a subsequent requests.EntryMethod(String 1-40 chars)RequiredTransaction entry method.RecordNo(String 1-256 chars)Returned when optional<RecordNo> tag used in a request.The RecordNo value can be saved and used as a token to process subsequent ByRecordNo transactions without using account number data.Date(String 1-40 chars)Transaction dateTime(String 1-40 chars)Transaction timePayAPI_Id(String 1-34 chars)The Pay API reference number to be used through Pay API for follow up transactions.PrintData:LineNNN(String 1-41 chars)Receipt print lines. Each <LineN> tag should be printed on a new line. Each <LineN> tag begins with a “.” which should not be printed – empty lines (blank) have only “.” as data. When <PrintData> elements exist, they should always be printed as the draft for the transaction.FSA/HSA EMVVoidSaleTo void a previously completed Flexible Spending Account or Health Savings Account transaction.Implementation Notes:1. <TranCode> should be set to EMVVoidSale2. Include the RefNo, AuthCode, AcqRefData and optional ProcessData values returned in FSA EMVSale response to be voided.3. FSA/HSA voids are processed as EMVVoidSale and will not include any FSA elements from the initial FSA EMVSale request.Sample Request? Required? Optional?POST /ProcessEMVTransaction/ HTTP/1.1Host: 192.168.1.151:8080Content-Type: application/xmlContent-Length: 675<?xml version="1.0"?>  <TStream>    <Transaction>        <MerchantID>DEMODCHAL2GP</MerchantID>        <POSPackageID>LPOS:2.95</POSPackageID>        <TranCode>EMVVoidSale</TranCode>         <InvoiceNo>101125</InvoiceNo>         <RefNo>ogXIfUTwvJLoLT6n3M7</RefNo>         <AuthCode>wR4b0VR</AuthCode>        <Amount>            <Purchase>12.00</Purchase>        </Amount>        <SequenceNo>0010010010</SequenceNo>        <AcqRefData>1200||H39savhog|EMVFSASale</AcqRefData>    <ProcessData>gqQVhGIVe9CQbnOEfs2MgEr5kbwcNwmUrEnDkaGRCEehrihwoh3DsvfbGAoceU1VAV3crLQ</ProcessData>    </Transaction></TStream>?MerchantID(String 1-24 chars)RequiredMerchant identification assigned by processor.POSPackageID(String 1-99 chars)RequiredInclude this tag with POS package name and version where the name and version are separated with a colon (“:”). Ex: EMVUSClient:1.26TranType(String 1-40 chars)RequiredUsed with the TranCode to specify payment type.TranCode(String 1-40 chars)RequiredThe type of transaction (eg. sale, return ,void, etc)InvoiceNo(Number 1-8 chars)RequiredInvoice number - sequential receipt number, check number, or other unique transaction identifier created and supplied by POS system.RefNo(String 1-50 chars)RequiredTransaction reference number. Use the same data as InvoiceNo.Amount:Purchase(Number 1-8 chars)RequiredPurchase price (with 2 place decimal – e.g. 29.95)AuthCode(String 1-16 chars)RequiredWhen performing a followup transaction, use the AuthCode returned in the original transaction response.AcqRefData(String 1-200 chars)RequiredUse the AcqRefData value returned in the original Sale transaction response.ProcessData(String 1-999 chars)Conditionaloptionally included if returned by processor in sale response.SequenceNo(String 1-20 chars)RequiredUse the value returned for SequenceNo from the last response. If the SequenceNo is lost or for initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.OKAmount(String 1-24 chars)When the optional OKAmount tag is included with the value “Disallow”, the DC Direct device will not prompt the cardholder to approve the transaction amount. If the OKAmount tag is omitted, the PIN pad will ask the cardholder to approve the transaction amount by default.SecureDevice(String 1-40 chars)“CloudEMV2”OperatorID(String 1-24 chars)Operator (clerk, server, etc.) associated with the transaction.UserTrace(String 1-24 chars)A unique value created and supplied by POS systemTranDeviceID(String 10-24 chars)ConditionalThe serial number of the DC Direct device. Required for DC Direct Server communication.Sample Response? Required? Optional?<?xml version="1.0" encoding="UTF-8"?><RStream>    <ResponseOrigin>Processor</ResponseOrigin>    <DSIXReturnCode>000000</DSIXReturnCode>    <CmdStatus>Approved</CmdStatus>    <TextResponse>APPROVED</TextResponse>    <SequenceNo>0010010010</SequenceNo>    <MerchantID>DEMODCHAL2GP</MerchantID>    <AcctNo>511509******7899</AcctNo>    <CardType>M/C</CardType>    <TranCode>EMVVoidSale</TranCode>    <AuthCode>ROqyhbMrH4</AuthCode>    <CaptureStatus>Captured</CaptureStatus>    <RefNo>b2I0YTf7uK8o1J3REXr31CB7</RefNo>    <InvoiceNo>101125</InvoiceNo>    <Purchase>12.00</Purchase>    <Authorize>12.00</Authorize>    <AcqRefData>1200||Q5TaLARPTIu9YNXwDl|EMVVoidSale</AcqRefData>    <ProcessData>ar6d8hHX2eS3GD80KcEiiljL4amXlJZyc1QcUIx6azDRGjOt1z429277hGm9tVF5CZnwsLfAijaLYBavNBQiwBDRF6ZYVfRUBeoeTIxXrTKbjkt3tzX0vvQ0n5TcHNneiqtNMxa3adV7XSDCZ6xzDdkrL</ProcessData>    <RecordNo>DC4:AQE6GC8kvVIyD6mrvR78b6mk8RIo_cVUft8gO0ktz6Ui08C9Jbhzf9k1poqceTgGnzy237-7YNjLeMkUT341UzHr8-VC6dMOm2jxa_ATeGei-1HqxFkuCLcA831R7GEa5S5P4s80b-U_MaUUks_Z9hKY</RecordNo>    <EntryMethod>SWIPED</EntryMethod>    <Date>11/10/2025</Date>    <Time>16:49:19</Time>    <PayAPI_Id>q-35IxP7VqYfInZ31fmCGejPct1py</PayAPI_Id>    <Line1>. </Line1>    <Line2>.                VOID SALE               </Line2>    <Line3>. </Line3>    <Line4>.MASTERCARD              ************7899</Line4>    <Line5>.ENTRY METHOD: SWIPED                    </Line5>    <Line6>.DATE: 11/10/2025  TIME: 16:49:19        </Line6>    <Line7>. </Line7>    <Line8>.INVOICE: 101125                         </Line8>    <Line9>.REFERENCE: b2I0YTf7uK8o1J3REXr31CB7     </Line9>    <Line10>.AUTH CODE: ROqyhbMrH4                   </Line10>    <Line11>. </Line11>    <Line12>.AMOUNT                        USD$ 12.00</Line12>    <Line13>.                              ==========</Line13>    <Line14>.TOTAL                         USD$ 12.00</Line14>    <Line15>. </Line15>    <Line16>.          APPROVED - THANK YOU          </Line16>    <Line17>.I AGREE TO PAY THE ABOVE TOTAL AMOUNT   </Line17>    <Line18>.ACCORDING TO CARD ISSUER AGREEMENT.     </Line18>    <Line19>.(MERCHANT AGREEMENT IF CREDIT VOUCHER)  </Line19>    <Line20>. </Line20>    <Line21>. </Line21>    <Line22>. </Line22>    <Line23>.x_______________________________________</Line23>    <Line24>.Merchant Signature                      </Line24>    <Line25>. </Line25>    <UserTrace /></RStream>?ResponseOrigin(String 1-10 chars)RequiredIndicates the source of the response:“Client” = generated by DC Direct application“DCDirect” = generated by DC Direct application“Server” = generated by Datacap server“Processor” = generated by payment processorDSIXReturnCode(Number 6-6 chars)RequiredSix digit return code that identifies the error type. See Errors on error codes for possible values.CmdStatus(String 1-10 chars)RequiredIndicates the outcome of the command:“Success” = command completed successfully“Approved” = transaction approved by payment processor“Declined” = transaction declined by payment processor“Declined Offline” = chip transaction transaction declined offline“Error” = error processing command. Check DSIXReturnCode and TextResponse for additional info on error.TextResponse(String 1-255 chars)RequiredFor Successful responses, this field can contain an optional message from the server or processor. For other response codes, see Errors on Error Codes for values.SequenceNo(Number 1-20 chars)The sequence number returned in all responses to be used on the next request. If the SequenceNo is lost or initial deployment of the PIN pad, the ECR/POS should attempt any transaction (using “0010010010” as a SequenceNo value) to re-sync.UserTrace(String 0-40 chars)Echo of data supplied by the user system in the request; for use by the user system for internal tracking. May be null if no user system data was supplied in the requestMerchantID(String 1-24 chars)The merchant ID supplied in the transaction request.AcctNo(String 1-24 chars)The account number from the card used for a manually entered transaction – will be truncated.CardType(String 3-24 chars)Card type used on transaction. Values include: AMEX, VISA, M/C, DCLB, DCVR, JCB, Debit, OTHER, UNDETERMINED (returned on tokenized transactions).TranCode(String 1-40 chars)TranCode value in response will indicate if transaction was processed as FSA.AuthCode(String 1-24 chars)The authorization code returned by the processor for the approved transaction. The AuthCode value should be saved since it is required for VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.CaptureStatus(String 1-24 chars)Indicates whether the host has captured the transaction. eg. “Captured”, “NotCaptured”RefNo(String 1-50 chars)A reference returned by the processor. Should initially match InvoiceNo. The RefNo value returned by the processor should be saved since it is required for subsequent VoidSale, Adjust, VoiceAuth and PreAuthCapture transactions.InvoiceNo(Number 1-8 chars)The invoice number supplied in the transaction request.OperatorID(Number 1-10 chars)Operator (clerk, server, etc.) associated with the Transaction.Purchase(Number 1-8 chars)The purchase amount requested in the transaction (to 2 decimal places).Authorize(Number 1-8 chars)The amount actually authorized for the transaction. This amount could be less than the Purchase amount requested and the POS/ECR system should verify to determine if additional tendering is required to satisfy the total payment.AcqRefData(String 1-200 chars)Acquirer Reference Data returned by processor.ProcessData(String 1-999 chars)optionally returned by processor. This value must be retained for use in a subsequent requests.EntryMethod(String 1-40 chars)RequiredTransaction entry method.RecordNo(String 1-256 chars)Returned when optional<RecordNo> tag used in a request.The RecordNo value can be saved and used as a token to process subsequent ByRecordNo transactions without using account number data.Date(String 1-40 chars)Transaction dateTime(String 1-40 chars)Transaction timePayAPI_Id(String 1-34 chars)The Pay API reference number to be used through Pay API for follow up transactions.PrintData:LineNNN(String 1-41 chars)Receipt print lines. Each <LineN> tag should be printed on a new line. Each <LineN> tag begins with a “.” which should not be printed – empty lines (blank) have only “.” as data. When <PrintData> elements exist, they should always be printed as the draft for the transaction.