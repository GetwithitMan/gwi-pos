Quick Start WorkflowsBasic payment workflows may vary by vertical or ISV use-case, so we put this quick start workflow guide together to outline some of the basics to help you get started.Perform an EMVParamDownloadAn EMVParamDownload must be performed when a payment device (PIN pad) is first installed/replaced or if the Datacap file build is modified in a way that would affect the PIN pad (EMV Support, EMV Cardholder Verification Method, and Contactless Support) or when requested by the processor.VerticalsSelect from one of the vertical-specific workflows below to get started? Retail? Grocery? Restaurant? Counter Service? Table Service? Fine Dining? Bar TabsRETAILThe general workflow for most retail settings includes the following trancodes:GetMultipleChoice (optional) ? EMVSale ? EMVPadReset1. GetMultipleChoice (optional)? <GetMultipleChoice> enables the POS to display a prompt on the payment device with up to 6 choices (dependent on device model) to the customer. This is most commonly used for Dual/Multi-pricing (cash discounting).? <GetMultipleChoice> is sent prior to the EMVSale request.2. EMVSale (required)? An EMVSale debits the customer’s account and authorizes/captures a transaction.? EMVSale supports EMV Credit, EMV Debit, EMV Contactless, Swipe, Manual Entry? Additional tags (if supported by POS)1. <OKAmount> - Use the value of “Disallow” to suppress amount acknowledgement.2. <CashBack> - Supply an amount for cashback in the <Amount> tag (i.e. <CashBack>10.00</CashBack>). Note cashback is only supported for Debit and Discover.3. EMVPadReset (required)? Send an EMVPadReset at the end of every transaction request and prior to any GetSignature requests.? EMVPadReset prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.GROCERYThe general workflow for grocery to support line-item display includes the following:CollectCardData ? LineItemDisplay ? EMVSale ? EMVPadReset1. CollectCardData2. Include <UseLineItemDisplay>Allow</UseLineItemDisplay> in the request3. <CollectCardData> allows the customer to dip or tap their card prior to the sale.4. POST request to /ProcessEMVTransaction5. LineItemDisplay6. Add/Remove/Clear line items one request at a time7. LineItemDisplay to display the items and amount8. RemoveLineItem to remove last line item9. ClearLineItem to clear all items displayed10. EMVSale11. Process EMVSale and inlcude <UseLastCardID> to process a transaction for the final amount.12. EMVPadReset (required)? Send an EMVPadReset at the end of every transaction request and prior to any GetSignature requests.? EMVPadReset prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.RESTAURANTCounter Service - Tip at time of sale (in-line tipping)EMVSale ? EMVPadReset1. EMVSale? In the EMVSale request, include the <Gratuity> element with the value “PrintBlankLine” to indicate a blank tip line printed on receipt.2. EMVPadReset? Send at the end of every transaction request? Prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.Table Service – Tip after saleEMVSale ? EMVPadReset ? AdjustByRecordNo1. EMVSale? Include <Gratuity> with value “Prompt” as part of request to ask for gratuity amount on card entry device? Optional Suggestive Tip Prompting: Include <Gratuity> with value “SuggestivePrompt” followed by the Gratuity Suggestions (i.e. <GratuitySuggestions>15% ($10.11):10.11,18% ($12.13):12.13,20% ($13.48):13.48,22% ($14.83):14.83</GratuitySuggestions>)2. EMVPadReset? Send at the end of every transaction request? Prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.3. AdjustByRecordNo? After the customer signs the receipt, if gratuity included, send AdjustByRecordNo request referencing response data from the previous EMVSale and include <Gratuity> with tip amount.? Only used to add gratuity (initial authorization amount should not be changed)? Request not sent to issuer, notifies processor to modify transaction amount to this new amount? The EMVSale must be adjusted before the batch is closed.Fine Dining Table Service – Tip after saleEMVPreAuth ? EMVPadReset ? PreAuthCaptureByRecordNo1. EMVPreAuth? Request for final check purchase amount and indicate blank tip line by including <Gratuity> element in request with a value of “PrintBlankLine”.? PreAuthorized transactions must be captured in order to settle? PreAuthorized transactions must be voided if not intending to capture2. EMVPadReset? Send at the end of every transaction request? Prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.3. PreAuthCaptureByRecordNo? Once the customer signs, if gratuity given, POS stores this until end of day. At end of day, capture each record using stored reference data and tips by processing PreAuthCaptureByRecordNo requests.? Required to capture an EMVPreAuth to add transaction to merchant’s batch.? Multiple captures will result in duplicate transactions.Bar TabsEMVPreAuth ? EMVPadReset ? IncrementalAuthByRecordNo ? PartialReversalByRecordNo ? PreAuthCaptureByRecordNo1. EMVPreAuth (Open a tab)? Preauthorize for small amount to open a tab? PreAuthorized transactions must be captured in order to settle? PreAuthorized transactions must be voided if not intending to capture2. EMVPadReset? Send at the end of every transaction request? Prompts for card removal and resets the card entry device back to its idle state. Required after card data is presented or to reset the card entry device back to idle screen.3. IncrementalAuthByRecordNo (increase authorized amount)? Send to increase authorized amount as customer adds to tab? Final IncrementalAuth includes gratuity amount4. PartialReversalByRecordNo (if authorized amount greater than final check amount)? Process PartialReversalByRecordNo at end of day to decrement last authorized amount to the final amount (this includes gratuity).? Note: no PrintData will be returned for IncrementalAuthByRecordNo and PartialReversalByRecordNo. The POS would need to generate a credit card draft for the customer to sign.5. PreAuthCaptureByRecordNo (to close tab)? At end of day, capture each record using stored reference data and tips by processing PreAuthCaptureByRecordNo requests.? Multiple captures will result in duplicate transactions.? Required to capture the transaction and add the transaction to merchant’s batch.Refunding a Customer1. VoidSaleByRecordNo? Send prior to batch close? Voids transaction in current batch? Supports Credit only? PreAuthorized (EMVPreAuth) transactions must be voided if not intending to capture2. EMVReturn (credits customer’s account)? Returns are unlinked and do not reference a prior transaction? Authorizes and captures transaction? Supports Credit and Debit? Refund a partial amount3. ReturnByRecordNo? Processed with token (RecordNo) returned from previous transaction? Refunds customer after batch close? Authorizes and captures transaction? Supports Credit Only? Refund a partial amount